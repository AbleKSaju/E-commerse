<head>
  <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">

  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.css"> -->

  <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.5/dist/sweetalert2.min.js"></script>

<!-- Animate.css -->
<link rel="stylesheet" href="/css/animate.css">
<!-- Icomoon Icon Fonts-->
<link rel="stylesheet" href="/css/icomoon.css">
<!-- Ion Icon Fonts-->
<link rel="stylesheet" href="/css/ionicons.min.css">
<!-- Bootstrap  -->
<link rel="stylesheet" href="/css/bootstrap.min.css">

<!-- Magnific Popup -->
<link rel="stylesheet" href="/css/magnific-popup.css">

<!-- Flexslider  -->
<link rel="stylesheet" href="/css/flexslider.css">

<!-- Owl Carousel -->
<link rel="stylesheet" href="/css/owl.carousel.min.css">
<link rel="stylesheet" href="/css/owl.theme.default.min.css">

<!-- Date Picker -->
<link rel="stylesheet" href="/css/bootstrap-datepicker.css">
<!-- Flaticons  -->
<link rel="stylesheet" href="/fonts/flaticon/font/flaticon.css">

<!-- Theme style  -->
<link rel="stylesheet" href="/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <style>
      .icon-hover-primary:hover {
          border-color: #3b71ca !important;
          background-color: white !important;
      }

      .icon-hover-primary:hover i {
          color: #3b71ca !important;
      }

      .icon-hover-danger:hover {
          border-color: #dc4c64 !important;
          background-color: white !important;
      }

      .icon-hover-danger:hover i {
          color: #dc4c64 !important;
      }

      .boxed label {
          display: inline-block;
          width: 100%;
          margin-top: 20px;
          padding: 10px;
          border: solid 2px #ccc;
          transition: all 0.3s;
      }

      .boxed input[type="radio"] {
          display: none;
      }

      .boxed input[type="radio"]:checked+label {
          border: solid 2px rgb(15, 103, 218);
          background-color: #bad5ff;
      }
      :root {
--card-line-height: 1.2em;
--card-padding: 1em;
--card-radius: 0.5em;
--color-green: #558309;
--color-gray: #e2ebf6;
--color-dark-gray: #c4d1e1;
--radio-border-width: 2px;
--radio-size: 1.5em;
}

body {
background-color: #f2f8ff;
color: #263238;
font-family: 'Noto Sans', sans-serif;
margin: 0;
padding: 2em 6vw;
}

.grid {
display: grid;
grid-gap: var(--card-padding);
margin: 0 auto;
max-width: 60em;
padding: 0;

@media (min-width: 42em) {
  grid-template-columns: repeat(3, 1fr);
}
}

.card {
background-color: #fff;
border-radius: var(--card-radius);
position: relative;

&:hover {
  box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.15);
}
}

.radio {
font-size: inherit;
margin: 0;
position: absolute;
right: calc(var(--card-padding) + var(--radio-border-width));
top: calc(var(--card-padding) + var(--radio-border-width));
}

@supports(-webkit-appearance: none) or (-moz-appearance: none) { 
.radio {
  -webkit-appearance: none;
  -moz-appearance: none;
  background: #fff;
  border: var(--radio-border-width) solid var(--color-gray);
  border-radius: 50%;
  cursor: pointer;
  height: var(--radio-size);
  outline: none;
  transition: 
    background 0.2s ease-out,
    border-color 0.2s ease-out;
  width: var(--radio-size); 

  &::after {
    border: var(--radio-border-width) solid #fff;
    border-top: 0;
    border-left: 0;
    content: '';
    display: block;
    height: 0.75rem;
    left: 25%;
    position: absolute;
    top: 50%;
    transform: 
      rotate(45deg)
      translate(-50%, -50%);
    width: 0.375rem;
  }

  &:checked {
    background: var(--color-green);
    border-color: var(--color-green);
  }
}

.card:hover .radio {
  border-color: var(--color-dark-gray);
  
  &:checked {
    border-color: var(--color-green);
  }
}
}

.plan-details {
border: var(--radio-border-width) solid var(--color-gray);
border-radius: var(--card-radius);
cursor: pointer;
display: flex;
flex-direction: column;
padding: var(--card-padding);
transition: border-color 0.2s ease-out;
}

.card:hover .plan-details {
border-color: var(--color-dark-gray);
}

.radio:checked ~ .plan-details {
border-color: var(--color-green);
}

.radio:focus ~ .plan-details {
box-shadow: 0 0 0 2px var(--color-dark-gray);
}

.radio:disabled ~ .plan-details {
color: var(--color-dark-gray);
cursor: default;
}

.radio:disabled ~ .plan-details .plan-type {
color: var(--color-dark-gray);
}

.card:hover .radio:disabled ~ .plan-details {
border-color: var(--color-gray);
box-shadow: none;
}

.card:hover .radio:disabled {
  border-color: var(--color-gray);
}

.plan-type {
color: var(--color-green);
font-size: 1.5rem;
font-weight: bold;
line-height: 1em;
}

.plan-cost {
font-size: 2.5rem;
font-weight: bold;
padding: 0.5rem 0;
}

.slash {
font-weight: normal;
}

.plan-cycle {
font-size: 2rem;
font-variant: none;
border-bottom: none;
cursor: inherit;
text-decoration: none;
}

.hidden-visually {
border: 0;
clip: rect(0, 0, 0, 0);
height: 1px;
margin: -1px;
overflow: hidden;
padding: 0;
position: absolute;
white-space: nowrap;
width: 1px;
}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>
<!-- cart + summary -->
<nav class="colorlib-nav" role="navigation">
  <%-include('../../partials/user-header')%>
</nav>
<section class="bg-light my-5">
  <div class="container">
      <div class="row">
          <!-- cart -->
          <div class="col-lg-9">
              <div class="card border shadow-0">
                  <div class="m-4">
                      <h1 style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                      font-weight: bolder;" class="card-title mb-4">
                          Select Address
                      </h1>
                      <a href="/add-address" class="btn btn-info" style="margin-left: 85%;">Add Address</a>

                      <form class="boxed" action="/buy-now" method="post">
                          <%for(i=0;i<userData.address.length;i++){%>
                          <input type="radio" id="<%=userData.address[i]._id%>" name="adress" class="address" required="true" value="<%=userData.address[i]._id%>" checked>
                          <label for="<%=userData.address[i]._id%>" class="d-flex">
                              <%=userData.address[i].name%><br>
                              <%=userData.address[i].number%> &nbsp; &nbsp;
                              <%=userData.address[i].altNumber%><br>
                              <%=userData.address[i].pinCode%><br>
                              <%=userData.address[i].house%>
                              <%=userData.address[i].area%>
                              <%=userData.address[i].landmark%>
                              <%=userData.address[i].town%>
                              <%=userData.address[i].state%>
                          </label>
                          <%}%>
                          <br><br>
                          <h1 style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
                          font-weight: bolder;" class="card-title mb-4">
                              Selected Products
                          </h1>
                          <%for(i=0;i<status.length;i++){%>
                              <div class="d-flex mb-3 border border-success rounded p-3">
                                <img class="img-fluid" width="100px" src="/uploads/products/<%=status[i].ProductDetails[0].image[0]%>" alt="Product-img">
                           
                                <p for="name" class="ms-4">
                                    <%=status[i].ProductDetails[0].name%><br>
                                   
                                    <%if(quantity!=null){%>
                                      <s>₹<%=status[i].ProductDetails[0].regularprice%></s>&nbsp;
                                      <b>₹<%=status[i].ProductDetails[0].saleprice*quantity%></b><br>
                                      Quantity: <%=quantity%> <br>
                                      <%}else{%>
                                        <s>₹<%=status[i].ProductDetails[0].regularprice%></s>&nbsp;
                                        <b>₹<%=status[i].ProductDetails[0].saleprice*status[i].quantity%> </b><br>
                                    Quantity: <%=status[i].quantity%> <br>
                                    <%}%>
                                    <%if(status[i].size==8 || !status[i].size ){%>
                                      Size: <%=size%>
                                      <%}else{%>
                                    Size: <%=status[i].size%>
                                    <%}%>
                                </p>
                            </div>
                            <input id="userId" type="hidden" name="proId" value="<%=userData._id%>">
                            <input id="proId" type="hidden" name="proId" value="<%=status[i].ProductDetails[0]._id%>">
                            <input id="qtyValue" type="hidden" name="quantity" value="<%= quantity != null ? quantity : status[i].quantity %>">
                            <input id="sizeValue" type="hidden" name="size" value="<%= (status[i].size == 8 || !status[i].size) ? size : status[i].size %>">
                            <%}%>
                            
                            <% var totalPrice = 0;
                            for (var i = 0; i < status.length; i++) {
                                if (quantity != null) {
                                    var productPrice = status[i].ProductDetails[0].saleprice * quantity;
                                    %>
                                    <% totalPrice += productPrice; %>
                                <% } else {
                                    var productPrice = status[i].ProductDetails[0].saleprice * status[i].quantity;
                                    %>
                                    <% totalPrice += productPrice; %>
                                <% }
                            }%>

                            <br><br>
                           
                          <h2>Select Payment method</h2>  
                    

                          <div class="grid mb-0">
                              <label class="card">
                                <input name="paymentMethod" class="radio payment" type="radio" value="cod"  checked>
                                <span class="plan-details">
                                  <img src="/images/cod.jpeg" alt="cod-img">
                                </span>
                              </label>

                              <label class="card">
                                  <input name="paymentMethod" class="radio payment" type="radio"  value="razorpay">
                                  <span class="plan-details">
                                    <img src="https://tse4.mm.bing.net/th?id=OIP.n7Hfo49CKkQWz6wM62j7HgHaFj&pid=Api&P=0&h=180" alt="razorpay-img">
                                  </span>
                              </label>

                              <label class="card">
                                  <input name="paymentMethod" class="radio payment" type="radio" value="paypal" readonly>
                                  <span class="plan-details">
                                    <img src="https://tse1.mm.bing.net/th?id=OIP.xeHwWMhSp8bpW1LdozQGNQHaHn&pid=Api&P=0&w=300&h=300" style="width:145px ;height: 145px;" alt="paypal-img">
                                  </span>
                              </label>

                            </div>
                            <%if(parseInt(totalPrice)<=parseInt(userData.wallet)){%>
                            <label class="" >
                              <input name="paymentMethod" class="radio payment" type="radio" value="wallet"  checked>
                              <span class="plan-details">
                                <h3>Use Wallet</h3>
                              </span>
                            </label>
                            <%}%>
                          </form>  
                  </div>
              </div>
          </div>
          <!-- cart -->
          <!-- summary -->
          <div class="modal fade top" id="modalCoupon" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true"
  data-bs-backdrop="true">
  <div class="modal-dialog modal-frame modal-top modal-notify modal-success" role="document">
    <!--Content-->
    <div class="modal-content">
      <!--Body-->
      <div class="modal-body">
        <h1></h1>
        <%if(coupons){%>
          <%for(i=0;i<coupons.length;i++){ %>
              <div class="row d-flex justify-content-center align-items-center border rounded">
                <div class="col-12 col-md-12 d-flex">
                  <div class="code-container col-3 col-md-3 d-flex align-items-center">
                    <p>
                      <span class="badge" id="couponCode<%= i %>" style="color: black;">
                        <%= coupons[i].name %>
                      </span>
                      <input type="text" value="<%= coupons[i].code %>" id="myInput<%= i %>" style="border: none;" readonly>

                    </p>
                  </div>
                  <div class="content-copy-container col-9 col-md-9 d-flex align-items-center">
                    <p class="pt-3 mx-4">
                      <strong class="ml-5"> &#8377;<%= coupons[i].offerPrice %> discount</strong>.
                    </p>
                    <button type="button" class="btn btn-success copy-button ms-auto" data-index="<%= i %>"
                      onclick="myFunction('<%= i %>')">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-minus" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M5.5 9.5A.5.5 0 0 1 6 9h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z"/>
                          <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                          <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                        </svg>
                    </button>
                  </div>
                </div>
              </div>
            <% } %>
            <% } %>

            <div class="close-container d-flex justify-content-end mt-2">
              <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal">No, thanks</button>
            </div>
      </div>
    </div>
    <!--/.Content-->
  </div>
</div>
          <div class="col-lg-3">
            
            <%if(coupons){%>

              <div class="card mb-3 border shadow-0">
                  <div class="card-body">

                      <form>
                          <button type="button" id="availableCoupon" class="btn btn-outline-primary mt-2" data-bs-toggle="modal"
            data-bs-target="#modalCoupon">Available Coupons</button>
                          <div class="form-group">
                              <label class="form-label">Have coupon?</label>
                              <div class="input-group">
                                  <input type="text" class="form-control border mb-1" id="coupon" name="coupon" placeholder="Coupon code" />
                                  <a onclick="applyCoupon(' <%= totalPrice %>','<%=userData.wallet%>')" id="applyButton" class="btn btn-light border">Apply</a>
                              </div>
                          </div>
                      </form>

                  </div>
              </div>
              <% }else{ %>
                <input type="hidden" class="form-control border" id="coupon" name="coupon" value="0" placeholder="Coupon code" />
                <%}%>

              <div class="card shadow-0 border">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <p class="mb-2">wallet:</p>
                      <p class="mb-2">₹ <b id="walletPrice"><%=userData.wallet%></b></p>
                  </div>
                      <div class="d-flex justify-content-between">
                          <p class="mb-2">Total price:</p>
                          <p class="mb-2">
                      ₹<b> <%= totalPrice %></b>
                          </p>
                      </div>
                      <div class="d-flex justify-content-between">
                          <p class="mb-2">Discount:</p>
                          <p class="mb-2 text-success" id="discount">0</p>
                      </div>
                      <!-- <div class="d-flex justify-content-between">
                          <p class="mb-2">TAX:</p>
                          <p class="mb-2">₹14.00</p>
                      </div> -->
                      <hr />
                      <div class="d-flex justify-content-between">
                          <p class="mb-2">Total price:</p>

                          <p class="mb-2 fw-bold " id="gt"> 
                            <%= totalPrice %>
                                  </p>
                             
                      </div>

                      <div class="mt-3">
                          <%if(method==true){%>
                              <a href="#" onclick="makePurchase('<%=total%>','<%=userData._id%>','buy')" class="btn btn-success w-100 shadow-0 mb-2"> MakePurchase </a>
                              <%}else if(method==false){%>
                          <a href="#" onclick="makePurchase('<%=total%>','<%=userData._id%>')" class="btn btn-success w-100 shadow-0 mb-2"> Make Purchase </a>
                          <%}%>
                          <%if(parseInt(totalPrice)>=parseInt(userData.wallet)&&userData.wallet!=0){%>
                          <button onclick="wallet()" id="walletButton" class="btn btn-light w-100 border mt-2"> Use wallet </button>
                            <%}%>
                          <a href="/show-products" class="btn btn-light w-100 border mt-2"> Back to shop </a>
                          <input type="hidden" id="walletAdded" value="0">
                      </div>
                  </div>
              </div>
          </div>
          <!-- summary -->
      </div>
  </div>
</section>
<!-- cart + summary -->
<section>
  
</section>
<!-- Recommended -->

<%-include('../../partials/user-footer')%>

<script src="/js/jquery.min.js"></script>
<!-- popper -->
<script src="/js/popper.min.js"></script>
<!-- bootstrap 4.1 -->
<script src="/js/bootstrap.min.js"></script>
<!-- jQuery easing -->
<script src="/js/jquery.easing.1.3.js"></script>
<!-- Waypoints -->
<script src="/js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="/js/jquery.flexslider-min.js"></script>
<!-- Owl carousel -->
<script src="/js/owl.carousel.min.js"></script>
<!-- Magnific Popup -->
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="js/magnific-popup-options.js"></script>
<!-- Date Picker -->
<script src="/js/bootstrap-datepicker.js"></script>
<!-- Stellar Parallax -->
<script src="/js/jquery.stellar.min.js"></script>
<!-- Main -->
<script src="/js/main.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>

function applyCoupon(total,wallet){
      const coupon = document.getElementById('coupon').value
      $.ajax({
          url:'/apply-coupon',
          method:'post',
          data:{
              coupon,
              total,
          },
              success:(response)=>{
              document.getElementById('coupon').readOnly = true;
              document.getElementById('availableCoupon').style.display = 'none';
              document.getElementById('applyButton').disabled =true;
              const gt = parseInt(document.getElementById('gt').innerHTML);
              const discount=parseInt(document.getElementById('discount').innerHTML)
              document.getElementById('gt').innerText = gt-response.offerPrice
              document.getElementById('discount').innerHTML = discount+parseInt(response.offerPrice);
              const tot = parseInt(document.getElementById('gt').innerHTML);
              if (tot >=wallet) {
              // Enable the button
              document.getElementById('walletButton').disabled = false;
              document.getElementById('walletButton').innerHTML = "Use wallet";
          } else {
              // Disable the button and display "Insufficient Funds"
              document.getElementById('walletButton').disabled = true;
              document.getElementById('walletButton').innerHTML = "Insufficient Funds";
          }
          }
      })
  }

function wallet(){
      Swal.fire({
              imageUrl: '/asset/imgs/icons/wallet.jpeg',
              imageAlt: 'wallet-img',
              showCloseButton: true,
              showCancelButton: true,
              html:
              '<h3>Wallet Balance: <b id="walletValue"><%=userData.wallet%></b></h3> ',
              confirmButtonText:
                  '<i class="fa fa-wallet"></i> Use wallet!',
          }).then((result)=>{
              if(result.isConfirmed){
                document.getElementById('walletAdded').value='<%=userData.wallet%>'
                  const gt = parseInt(document.getElementById('gt').innerHTML);
                  const discount = parseInt(document.getElementById('discount').innerHTML);
                  if(gt<parseInt('<%=userData.wallet%>')){
                      alert("Not possible")
                  }else{
                      // document.getElementById('walletButton').innerText("used")
                      document.getElementById('walletButton').style.display = 'none';
                      var a=document.getElementById('gt').innerHTML = gt-parseInt('<%=userData.wallet%>')
                      document.getElementById('walletPrice').innerText="0"
                      document.getElementById('discount').innerHTML = discount+parseInt('<%=userData.wallet%>')
                  }
              }
      })
  }

 function myFunction(index) {
var copyText = document.getElementById("myInput" + index);
copyText.select();
copyText.setSelectionRange(0, 99999)
navigator.clipboard.writeText(copyText.value)
  .then(function() {
    console.log("Text copied to clipboard: " + copyText.value);
          var noThanksButton = document.querySelector('.close-container button');
    if (noThanksButton) {
      noThanksButton.click();
    }
  })
  .catch(function(err) {
    console.error("Failed to copy text: " + err);
  });
}
  </script>
  

<script>

  
function makePurchase(total, user, status) {
  var quantity = document.getElementById('qtyValue').value;
  var size = document.getElementById('sizeValue').value;
  var proId = document.getElementById('proId').value;
  const totalPrice = parseInt(document.getElementById('gt').innerHTML)
  var wallet=document.getElementById('walletPrice').innerHTML
  var address = $('.address:checked').val();
  var payment = $('.payment:checked').val();
  var addWallet = document.getElementById('walletAdded').value
  var data = {
      userId: user,
      totalPrice,
      addressId: address,
      payment,
      wallet,
      addWallet
  };
  if (status) {
      data.proId = proId;
      data.quantity = quantity; 
      data.size = size;
  }
  $.ajax({
      url: '/makePurchase',
      method: 'post',
      data: data,
      success: function (response) {
          if (response.status === "cod") {
              Swal.fire({
                  title: "Order Completed",
                  text: "Enjoy Here",
                  icon: "success",
                  showCancelButton: true,
                  confirmButtonText: "Orders",
                  cancelButtonText: "Home",
                  reverseButtons: true
              }).then(function (result) {
                  if (result.value) {
                      location.href = '/orderDetails';
                  } else if (result.dismiss === "cancel") {
                      location.href = "/";
                  }
              });
          }else if (response.status === "wallet") {
              Swal.fire({
                  title: "Order Completed",
                  text: "Enjoy Here",
                  icon: "success",
                  showCancelButton: true,
                  confirmButtonText: "Orders",
                  cancelButtonText: "Home",
                  reverseButtons: true
              }).then(function (result) {
                  if (result.value) {
                      location.href = '/orderDetails';
                  } else if (result.dismiss === "cancel") {
                      location.href = "/";
                  }
              });
          }else if(response.status == 'razorpay'){
               var options = {
                       "key": "rzp_test_sPwoxcRC0hnSFO", // Enter the Key ID generated from the Dashboard
                       "amount": response.order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                       "currency": "INR",
                       "name": "Future Furniture", //your business name
                       "description": "Test Transaction",
                       "image": "https://example.com/your_logo",
                       "order_id": response.order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                       "handler": function (status){
                           verifyPayment(response.order,status,response.id)
                       },
                       "prefill": { //We recommend using the prefill parameter to auto-fill customer's contact information, especially their phone number
                           "name": "Gaurav Kumar", //your customer's name
                           "email": "gaurav.kumar@example.com", 
                           "contact": "9000090000"  //Provide the customer's phone number for better conversion rates 
                       },
                       "notes": {
                           "address": "Razorpay Corporate Office"
                       },
                       "theme": {
                           "color": "#3399cc"
                       }
                   };
                   var rzp1 = new Razorpay(options);
                   rzp1.open();


           }else if(response.status == 'outOfStock'){
                  Swal.fire({
                      title: 'Stock!!',
                      text: "the products is out of stock",
                      icon: 'error',
                      timer: 5000
                  })
              }else {
               Swal.fire({
                   title: 'Error Occured',
                   text: "Can't process order error occured",
                   icon: 'error',
                   timer: 5000
               })

           }
      }
  })
}
function verifyPayment(order,payment,id){
let user=document.getElementById('userId').value
      $.ajax({
          url:'/verifyPayment',
          method:'post',
          data:{
              order,
              payment
          },success:(response)=>{
              
              if(response.status){
                  Swal.fire({
                      title: "Order success",
                      text: "order placed successfully",
                      icon: "success",
                      showCancelButton: true,
                      confirmButtonText: "view orders",
                      cancelButtonText: "continue shopping",
                      reverseButtons: true
                  }).then(function (result) {
                      if (result.value) {
                          
                        location.href = '/orderDetails';
                          // result.dismiss can be "cancel", "overlay",
                          // "close", and "timer"
                      } else if (result.dismiss === "cancel") {
                          location.href = '/'
                      }
                  });
              }

          }
      })
  }


</script>